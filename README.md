# Audio Converter & Splitter for Gemini

このツールは、重い WAV 音声ファイルを **MP3 形式に軽量化** し、さらに Google Gemini API の制限（100MB）に合わせて **自動分割** するためのスクリプトです。

### なぜ MP3 に変換するのか？

1. **ファイルサイズの削減**: WAV 形式は非常に容量が大きいため、API の上限に達しやすくなります。MP3 にすることで、音質を維持しつつ容量を約 1/10 以下に抑えられます。
2. **コストと効率**: Gemini API で音声を処理する際、ファイルサイズが小さいほどアップロードが高速になり、処理待ち時間を短縮できます。

### 主な機能

* **自動 MP3 変換**: 指定したビットレート（128kbps）で WAV から MP3 へ変換します。
* **インテリジェント分割**: 変換後のファイルサイズを予測し、100MB を超える場合は自動で複数の MP3 ファイルに分割して出力します。
* **ディレクトリ管理**: 生成されたファイルは `converted_mp3` フォルダに整理されます。

### セットアップ

#### 1. 依存ライブラリのインストール

音声処理ライブラリ `pydub` を使用します。

```bash
pip install pydub

```

#### 2. ffmpeg の準備

MP3 へのエンコードには `ffmpeg` が必須です。

* **Mac**: `brew install ffmpeg`
* **Windows**: [Gyan.dev](https://www.gyan.dev/ffmpeg/builds/) から実行ファイルをダウンロードし、システム環境変数（Path）に追加してください。

### 使い方

1. プロジェクトのルートディレクトリに変換したい `.wav` ファイルを配置します。
2. スクリプト内のファイルパスを修正します（例: `process_audio_for_gemini("./your_file.wav")`）。
3. スクリプトを実行します。
```bash
python main.py

```


4. `converted_mp3/` フォルダを確認してください。

### 技術的な詳細

分割の閾値は以下の計算式に基づいています：

デフォルトでは **95MB** を上限としてマージンを確保しています。

---

### 次のステップ

もし「大量のファイルを一括で変換したい」といった要望や、Geminiへの「自動アップロード・文字起こしスクリプト」への統合が必要であれば、いつでもお伝えくださいね！
